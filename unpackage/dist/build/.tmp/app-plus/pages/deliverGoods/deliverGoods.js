(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/deliverGoods/deliverGoods"],{"2cb2":function(e,t,o){"use strict";o.r(t);var r=o("bf7b"),n=o.n(r);for(var a in r)"default"!==a&&function(e){o.d(t,e,function(){return r[e]})}(a);t["default"]=n.a},"3f4a":function(e,t,o){"use strict";o.r(t);var r=o("4452"),n=o("2cb2");for(var a in n)"default"!==a&&function(e){o.d(t,e,function(){return n[e]})}(a);o("b799");var s=o("2877"),i=Object(s["a"])(n["default"],r["a"],r["b"],!1,null,null,null);t["default"]=i.exports},4452:function(e,t,o){"use strict";var r=function(){var e=this,t=e.$createElement,o=(e._self._c,Number(e.active)),r=Number(e.active);e._isMounted||(e.e0=function(t){e.active=0}),e.$mp.data=Object.assign({},{$root:{m0:o,m1:r}})},n=[];o.d(t,"a",function(){return r}),o.d(t,"b",function(){return n})},b6bc:function(e,t,o){},b799:function(e,t,o){"use strict";var r=o("b6bc"),n=o.n(r);n.a},bf7b:function(e,t,o){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){return o.e("components/scodeError").then(o.bind(null,"94bf"))},a={components:{error:n},data:function(){return{type:"scanCode",text:"扫码错误",showError:!1,current:0,codeArr:[],arr:["中国","美国","巴西","日本"],index:0,active:0,List:[],sellerName:"",count:0,phone:"",flag:"",activity:""}},watch:{codeArr:{handler:function(e){var t=0,o=!0,r=!1,n=void 0;try{for(var a,s=this.codeArr[Symbol.iterator]();!(o=(a=s.next()).done);o=!0){var i=a.value;t+=i.count}}catch(d){r=!0,n=d}finally{try{o||null==s.return||s.return()}finally{if(r)throw n}}this.count=t},deep:!0}},methods:{onLoad:function(){var e=plus.android.runtimeMainActivity();this.activity=e;plus.android.importClass("android.content.Context");var t=plus.android.implements("io.dcloud.feature.internal.reflect.BroadcastReceiver",{onReceive:a});this.flag=t;var o=plus.android.importClass("android.content.IntentFilter"),r=(plus.android.importClass("android.content.Intent"),new o);r.addAction("android.intent.ACTION_DECODE_DATA"),e.registerReceiver(t,r);var n=this;function a(e,t){plus.android.importClass(t);var o=t.getByteArrayExtra("barcode"),r=s(o),a=(t.getIntExtra("length",0),t.getByteExtra("barcodeType",0));s(a);if(r&&r.indexOf("https://2641.cn/")>-1){var i=r.split("https://2641.cn/")[1];n.getzsCodeMumber(i)}else this.showError=!0,this.text="关联子码获取失败",this.type="scanCode"}function s(e){if("string"===typeof e)return e;for(var t="",o=e,r=0;r<o.length;r++){var n=o[r].toString(2),a=n.match(/^1+?(?=0)/);if(a&&8==n.length){for(var s=a[0].length,i=o[r].toString(2).slice(7-s),d=1;d<s;d++)i+=o[d+r].toString(2).slice(2);t+=String.fromCharCode(parseInt(i,2)),r+=s-1}else t+=String.fromCharCode(o[r])}return t}},destroyed:function(){this.activity.unregisterReceiver(this.flag)},onHide:function(){this.activity.unregisterReceiver(this.flag)},onUnload:function(){this.activity.unregisterReceiver(this.flag)},radioChange:function(t){console.log(e(t," at pages\\deliverGoods\\deliverGoods.vue:196")),this.current=Number(t.detail.value),console.log(e(this.current," at pages\\deliverGoods\\deliverGoods.vue:198"))},getzsCodeMumber:function(t){var o=this;this.$common.get("/trace-api/trace/getSubCodeById?sid="+t).then(function(t){if(200===Number(t.data.code)){if(console.log(e("发货对象",t," at pages\\deliverGoods\\deliverGoods.vue:205")),o.showError=!1,Number(t.data.data.isEnable)>0)if(o.codeArr.length>0){var r=[],n=!0,a=!1,s=void 0;try{for(var i,d=o.codeArr[Symbol.iterator]();!(n=(i=d.next()).done);n=!0){var c=i.value;r.push(c.traceSubCodeNumber)}}catch(u){a=!0,s=u}finally{try{n||null==d.return||d.return()}finally{if(a)throw s}}r.indexOf(t.data.data.traceSubCodeNumber)>-1?o.$common.showToast("子码编号已存在","none"):(o.$common.showToast("扫码成功","success"),o.codeArr.push({count:t.data.data.count,traceSubCodeNumber:t.data.data.traceSubCodeNumber})),console.log(e(r," at pages\\deliverGoods\\deliverGoods.vue:222"))}else o.$common.showToast("扫码成功","success"),o.codeArr.push({count:t.data.data.count,traceSubCodeNumber:t.data.data.traceSubCodeNumber});else o.$common.showToast("此编码已发货","none");console.log(e(o.codeArr," at pages\\deliverGoods\\deliverGoods.vue:235"))}else o.showError=!1,o.$common.showToast(t.data.message,"none")})},next:function(){this.codeArr.length>0?this.active=1:this.$common.showToast("请添加货物","none")},nextConfirm:function(){var t=this,o="";if(0!==this.codeArr.length){if(1===Number(this.current)){if(!this.$common.trim(this.sellerName))return void this.$common.showToast("请输入商家名称","none");o=this.sellerName}else{if(!this.List[Number(this.index)].agentName)return void this.$common.showToast("请选择代理商","none");o=this.List[Number(this.index)].agentName}console.log(e(this.current," at pages\\deliverGoods\\deliverGoods.vue:270"));var n=[],a=!0,s=!1,i=void 0;try{for(var d,c=this.codeArr[Symbol.iterator]();!(a=(d=c.next()).done);a=!0){var u=d.value;n.push(u.traceSubCodeNumber)}}catch(v){s=!0,i=v}finally{try{a||null==c.return||c.return()}finally{if(s)throw i}}var l={codeNumber:n,bussName:o};console.log(e(l," at pages\\deliverGoods\\deliverGoods.vue:279")),this.$common.post("/trace-api/trace/deliverGoods",l).then(function(o){console.log(e(o," at pages\\deliverGoods\\deliverGoods.vue:281")),200===Number(o.data.code)?(t.$common.showToast(o.data.message,"success"),setTimeout(function(){r.navigateBack({delta:1})},1500)):t.$common.showToast(o.data.message,"none")})}else this.$common.showToast("外码或内码不能为空","none")},getList:function(){var t=this,o=r.getStorageSync("setUserData").merchant.merchantId;this.$common.get("/agent/merchantAgent/normal?merchantId="+o).then(function(o){console.log(e(o," at pages\\deliverGoods\\deliverGoods.vue:297")),t.List=o.data.data||[]})},bindPickerChange:function(t){console.log(e("picker发送选择改变，携带值为",this.List[Number(t.target.value)]," at pages\\deliverGoods\\deliverGoods.vue:302")),console.log(e(Number(t.target.value)," at pages\\deliverGoods\\deliverGoods.vue:303")),this.index=Number(t.target.value)},jump:function(){this.active=1},deleteCode:function(e){var t=this;r.showModal({title:"提示",content:"此操作将删除此编号",success:function(o){o.confirm&&(t.codeArr.splice(e,1),t.$common.showToast("删除成功","success"))}})},scanCode:function(){var t=this;r.scanCode({success:function(o){console.log(e('res.result.indexOf("https://2641.cn/")',o.result.indexOf("https://2641.cn/")," at pages\\deliverGoods\\deliverGoods.vue:326")),console.log(e("res.result",o.result," at pages\\deliverGoods\\deliverGoods.vue:327"));var r=t;if(o.result&&o.result.indexOf("https://2641.cn/")>-1){var n=o.result.split("https://2641.cn/")[1];console.log(e("sid",n," at pages\\deliverGoods\\deliverGoods.vue:331")),t.$common.get("/trace-api/trace/getSubCodeById?sid="+n).then(function(t){if(200===Number(t.data.code)){if(console.log(e("发货对象",t," at pages\\deliverGoods\\deliverGoods.vue:334")),r.showError=!1,Number(t.data.data.isEnable)>0)if(r.codeArr.length>0){var o=[],n=!0,a=!1,s=void 0;try{for(var i,d=r.codeArr[Symbol.iterator]();!(n=(i=d.next()).done);n=!0){var c=i.value;o.push(c.traceSubCodeNumber)}}catch(u){a=!0,s=u}finally{try{n||null==d.return||d.return()}finally{if(a)throw s}}o.indexOf(t.data.data.traceSubCodeNumber)>-1?r.$common.showToast("子码编号已存在","none"):(r.$common.showToast("扫码成功","success"),r.codeArr.push({count:t.data.data.count,traceSubCodeNumber:t.data.data.traceSubCodeNumber})),console.log(e(o," at pages\\deliverGoods\\deliverGoods.vue:351"))}else r.$common.showToast("扫码成功","success"),r.codeArr.push({count:t.data.data.count,traceSubCodeNumber:t.data.data.traceSubCodeNumber});else r.$common.showToast("此编码已发货","none");console.log(e(r.codeArr," at pages\\deliverGoods\\deliverGoods.vue:364"))}else r.showError=!1,r.$common.showToast(t.data.message,"none")})}else t.showError=!0,t.text="关联子码获取失败",t.type="scanCode"}})}},created:function(){this.getList()}};t.default=a}).call(this,o("0de9")["default"],o("6e42")["default"])},ee9c:function(e,t,o){"use strict";(function(e){o("7b83"),o("921b");r(o("66fd"));var t=r(o("3f4a"));function r(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("6e42")["createPage"])}},[["ee9c","common/runtime","common/vendor"]]]);