(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/deliverSellerNode/deliverSellerNode"],{"1f8d":function(e,t,o){"use strict";o.r(t);var r=o("b967"),n=o.n(r);for(var a in r)"default"!==a&&function(e){o.d(t,e,function(){return r[e]})}(a);t["default"]=n.a},"397d":function(e,t,o){"use strict";var r=function(){var e=this,t=e.$createElement,o=(e._self._c,Number(e.active)),r=Number(e.active);e._isMounted||(e.e0=function(t){e.active=0}),e.$mp.data=Object.assign({},{$root:{m0:o,m1:r}})},n=[];o.d(t,"a",function(){return r}),o.d(t,"b",function(){return n})},"6e3f":function(e,t,o){"use strict";var r=o("8c98"),n=o.n(r);n.a},"8c98":function(e,t,o){},afad:function(e,t,o){"use strict";o.r(t);var r=o("397d"),n=o("1f8d");for(var a in n)"default"!==a&&function(e){o.d(t,e,function(){return n[e]})}(a);o("6e3f");var l=o("2877"),s=Object(l["a"])(n["default"],r["a"],r["b"],!1,null,null,null);t["default"]=s.exports},b967:function(e,t,o){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){return o.e("components/scodeError").then(o.bind(null,"94bf"))},a={components:{error:n},data:function(){return{type:"scanCode",text:"扫码错误",showError:!1,current:0,codeArr:[],arr:["中国","美国","巴西","日本"],index:0,active:1,List:[],sellerName:"",count:0}},watch:{codeArr:{handler:function(e){var t=0,o=!0,r=!1,n=void 0;try{for(var a,l=this.codeArr[Symbol.iterator]();!(o=(a=l.next()).done);o=!0){var s=a.value;t+=s.count}}catch(i){r=!0,n=i}finally{try{o||null==l.return||l.return()}finally{if(r)throw n}}this.count=t},deep:!0}},methods:{radioChange:function(t){console.log(e(t," at pages\\deliverSellerNode\\deliverSellerNode.vue:109")),this.current=Number(t.detail.value),console.log(e(this.current," at pages\\deliverSellerNode\\deliverSellerNode.vue:111"))},next:function(){this.codeArr.length>0?this.active=1:this.$common.showToast("请添加货物","none")},nextConfirm:function(){var t=this,o="";if(0!==this.codeArr.length){if(1===Number(this.current)){if(!this.$common.trim(this.sellerName))return void this.$common.showToast("请输入商家名称","none");o=this.sellerName}else{if(!this.List[Number(this.index)].agentName)return void this.$common.showToast("请选择代理商","none");o=this.List[Number(this.index)].agentName}console.log(e(this.current," at pages\\deliverSellerNode\\deliverSellerNode.vue:141"));var n=[],a=!0,l=!1,s=void 0;try{for(var i,c=this.codeArr[Symbol.iterator]();!(a=(i=c.next()).done);a=!0){var d=i.value;n.push(d.traceSubCodeNumber)}}catch(m){l=!0,s=m}finally{try{a||null==c.return||c.return()}finally{if(l)throw s}}var u={codeNumber:n,bussName:o};console.log(e(u," at pages\\deliverSellerNode\\deliverSellerNode.vue:150")),this.$common.post("/trace-api/trace/deliverGoods",u).then(function(o){console.log(e(o," at pages\\deliverSellerNode\\deliverSellerNode.vue:152")),200===Number(o.data.code)?(t.$common.showToast(o.data.message,"success"),setTimeout(function(){r.navigateBack({delta:1})},1500)):t.$common.showToast(o.data.message,"none")})}else this.$common.showToast("外码或内码不能为空","none")},getList:function(){var t=this,o=r.getStorageSync("setUserData").merchant.merchantId;this.$common.get("/agent/merchantAgent/normal?merchantId="+o).then(function(o){console.log(e(o," at pages\\deliverSellerNode\\deliverSellerNode.vue:168")),t.List=o.data.data||[]})},bindPickerChange:function(t){console.log(e("picker发送选择改变，携带值为",this.List[Number(t.target.value)]," at pages\\deliverSellerNode\\deliverSellerNode.vue:173")),console.log(e(Number(t.target.value)," at pages\\deliverSellerNode\\deliverSellerNode.vue:174")),this.index=Number(t.target.value)},jump:function(){this.active=1},deleteCode:function(e){var t=this;r.showModal({title:"提示",content:"此操作将删除此编号",success:function(o){o.confirm&&(t.codeArr.splice(e,1),t.$common.showToast("删除成功","success"))}})},scanCode:function(){var t=this;r.scanCode({success:function(o){var r=t;if(o.result&&o.result.indexOf("SID")>0){var n=o.result.split("SID=")[1];t.$common.get("/trace-api/trace/getSubCodeById?sid="+n).then(function(t){if(200===Number(t.data.code)){if(console.log(e("发货对象",t," at pages\\deliverSellerNode\\deliverSellerNode.vue:202")),r.showError=!1,Number(t.data.data.isEnable)>0)if(r.codeArr.length>0){var o=[],n=!0,a=!1,l=void 0;try{for(var s,i=r.codeArr[Symbol.iterator]();!(n=(s=i.next()).done);n=!0){var c=s.value;o.push(c.traceSubCodeNumber)}}catch(d){a=!0,l=d}finally{try{n||null==i.return||i.return()}finally{if(a)throw l}}o.indexOf(t.data.data.traceSubCodeNumber)>-1?r.$common.showToast("子码编号已存在","none"):(r.$common.showToast("扫码成功","success"),r.codeArr.push({count:t.data.data.count,traceSubCodeNumber:t.data.data.traceSubCodeNumber})),console.log(e(o," at pages\\deliverSellerNode\\deliverSellerNode.vue:219"))}else r.$common.showToast("扫码成功","success"),r.codeArr.push({count:t.data.data.count,traceSubCodeNumber:t.data.data.traceSubCodeNumber});else r.$common.showToast("此编码已发货","none");console.log(e(r.codeArr," at pages\\deliverSellerNode\\deliverSellerNode.vue:233"))}else r.showError=!1,r.$common.showToast(t.data.message,"none")})}else t.showError=!0,t.text="关联子码获取失败",t.type="scanCode"}})}},created:function(){this.getList()}};t.default=a}).call(this,o("0de9")["default"],o("6e42")["default"])},cd5e:function(e,t,o){"use strict";(function(e){o("7b83"),o("921b");r(o("66fd"));var t=r(o("afad"));function r(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("6e42")["createPage"])}},[["cd5e","common/runtime","common/vendor"]]]);