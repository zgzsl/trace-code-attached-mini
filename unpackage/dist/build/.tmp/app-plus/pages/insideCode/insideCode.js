(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/insideCode/insideCode"],{3856:function(t,e,n){"use strict";(function(t){n("7b83"),n("921b");o(n("66fd"));var e=o(n("5d1a"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},"3b80":function(t,e,n){},"539f":function(t,e,n){"use strict";n.r(e);var o=n("878e"),i=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,function(){return o[t]})}(r);e["default"]=i.a},"5d1a":function(t,e,n){"use strict";n.r(e);var o=n("e122"),i=n("539f");for(var r in i)"default"!==r&&function(t){n.d(e,t,function(){return i[t]})}(r);n("a88d");var a=n("2877"),s=Object(a["a"])(i["default"],o["a"],o["b"],!1,null,null,null);e["default"]=s.exports},"878e":function(t,e,n){"use strict";(function(t,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(){return n.e("components/scodeError").then(n.bind(null,"94bf"))},r={components:{error:i},data:function(){return{title:"你好！",type:"scode",text:"扫码错误",showError:!1,zscode:"",flag:"",activity:""}},onLoad:function(){this.title="开始监听！";var t=plus.android.runtimeMainActivity();this.activity=t;plus.android.importClass("android.content.Context");var e=plus.android.implements("io.dcloud.feature.internal.reflect.BroadcastReceiver",{onReceive:r});this.flag=e;var n=plus.android.importClass("android.content.IntentFilter"),o=(plus.android.importClass("android.content.Intent"),new n);o.addAction("android.intent.ACTION_DECODE_DATA"),t.registerReceiver(e,o);var i=this;function r(t,e){plus.android.importClass(e);var n=e.getByteArrayExtra("barcode"),o=a(n),r=(e.getIntExtra("length",0),e.getByteExtra("barcodeType",0));a(r);if(o&&o.indexOf("https://2641.cn/")>-1){var s=o.split("https://2641.cn/")[1];i.getCodeZsNumber(s)}else i.showError=!0,i.text="内码获取失败",i.type="scode";i.title=o}function a(t){if("string"===typeof t)return t;for(var e="",n=t,o=0;o<n.length;o++){var i=n[o].toString(2),r=i.match(/^1+?(?=0)/);if(r&&8==i.length){for(var a=r[0].length,s=n[o].toString(2).slice(7-a),c=1;c<a;c++)s+=n[c+o].toString(2).slice(2);e+=String.fromCharCode(parseInt(s,2)),o+=a-1}else e+=String.fromCharCode(n[o])}return e}},destroyed:function(){this.activity.unregisterReceiver(this.flag)},onHide:function(){this.activity.unregisterReceiver(this.flag)},onUnload:function(){this.activity.unregisterReceiver(this.flag)},methods:{createdClick:function(){this.scode()},confirm:function(){this.$common.get("/trace-api/trace/changeOutCode?outCode="+this.zscode).then(function(e){console.log(t(e," at pages\\insideCode\\insideCode.vue:145")),200===Number(e.data.code)?(o.showToast({title:e.data.message,duration:2e3}),setTimeout(function(){o.navigateBack({delta:1})},1500)):o.showToast({title:e.data.message,duration:2e3,icon:"none"})})},scode:function(){var t=this;o.scanCode({success:function(e){if(e.result&&e.result.indexOf("https://2641.cn/")>-1){var n=e.result.split("https://2641.cn/")[1];t.getCodeZsNumber(n)}else t.showError=!0,t.text="内码获取失败",t.type="scode"}})},getCodeZsNumber:function(e){var n=this,o=this;this.$common.get("/trace-api/trace/getSubCodeById?sid="+Number(e)).then(function(e){console.log(t(e," at pages\\insideCode\\insideCode.vue:183")),200===Number(e.data.code)?"Y"===e.data.data.isLeaf?(o.$common.showToast("扫码成功","success"),o.showError=!1,o.zscode=e.data.data.traceSubCodeNumber||""):(n.showError=!0,n.text="此码不是内码,内码获取失败",n.type="scode"):(o.showError=!1,o.$common.showToast(e.data.message,"none"))})}}};e.default=r}).call(this,n("0de9")["default"],n("6e42")["default"])},a88d:function(t,e,n){"use strict";var o=n("3b80"),i=n.n(o);i.a},e122:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c},i=[];n.d(e,"a",function(){return o}),n.d(e,"b",function(){return i})}},[["3856","common/runtime","common/vendor"]]]);