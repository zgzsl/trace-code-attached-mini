(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/print/print"],{"0ba8":function(t,e,i){"use strict";i.r(e);var a=i("6334"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);e["default"]=n.a},"55c3":function(t,e,i){"use strict";var a={"uni-steps":()=>i.e("components/uni-steps/uni-steps").then(i.bind(null,"8f0e")),"uni-list":()=>i.e("components/uni-list/uni-list").then(i.bind(null,"3561"))},n=function(){var t=this,e=t.$createElement,i=(t._self._c,Number(t.activeIndex)),a=Number(t.activeIndex),n=Number(t.activeIndex);t._isMounted||(t.e0=function(e){t.showPickerStart=!0},t.e1=function(e){t.showPickerEnd=!0},t.e2=function(e){t.count=""}),t.$mp.data=Object.assign({},{$root:{m0:i,m1:a,m2:n}})},o=[];i.d(e,"b",function(){return n}),i.d(e,"c",function(){return o}),i.d(e,"a",function(){return a})},6334:function(t,e,i){"use strict";(function(t,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(){return i.e("components/qingqing-steps/uni-steps").then(i.bind(null,"aa0e"))},o=function(){return i.e("components/mx-datepicker/mx-datepicker").then(i.bind(null,"30a9"))},r=function(){return i.e("components/uni-list/uni-list").then(i.bind(null,"3561"))},s=function(){return i.e("components/uni-list-item/uni-list-item").then(i.bind(null,"8144"))},c=function(){return i.e("components/pengkai-draw").then(i.bind(null,"b76f"))},u={components:{uniSteps:n,MxDatePicker:o,uniList:r,uniListItem:s,pengkaiDraw:c},data:function(){return{start:"",end:"",zsCodeArr:[],zsCodeInfo:{},traceCodeNumberArr:[],traceCodeNumberInfo:{},current:"",activeIndex:0,scrollY:!0,visible:!1,showPickerEnd:!1,showPickerStart:!1,date:"2019/01/01",time:"15:00:12",datetime:"2019/01/01 15:00:12",range:["2019/01/01","2019/01/06"],rangetime:["2019/01/08 14:00","2019/01/16 13:59"],type:"datetime",value:"",active:0,pageNum:1,historypageNum:1,traceCodeNumberFlag:"",getGoodsLists:[],count:"",NavList:[{name:"设置外码比例"},{name:"设置外码数量"}],data:[{title:"选择批次码",desc:"关联商品"},{title:"设置规则",desc:"外码数量或比例"},{title:"打印",desc:"打印机出码"}]}},created:function(){this.getTraceCode()},watch:{activeIndex:function(t){0===Number(t)&&this.$store.state&&this.$store.state.activeZs&&(this.current=Number(this.$store.state.activeZs)),1===Number(t)&&this.getGoodsList()}},onReachBottom:function(){this.zsCodeInfo.total>this.zsCodeInfo.pageSize&&(this.pageNum++,this.getTraceCode())},methods:{outZsCode:function(){this.count?this.$common.get("/trace-api/trace/generateOutCodeByCount?count="+this.count).then(function(t){}):t.showToast({title:"请输入数量",duration:2e3,icon:"none"})},scroll:function(){this.traceCodeNumberInfo.total>this.traceCodeNumberInfo.pageSize&&(this.historypageNum++,this.getHistory(this.traceCodeNumberFlag))},getGoodsList:function(){var t=this;a("log",this.$store.state.zsCodeNumber," at pages\\print\\print.vue:235"),this.$common.get("/trace-api/trace/getTraceRecordByPage?traceCodeNumber="+this.$store.state.zsCodeNumber+"&pageNum=100000").then(function(e){a("log",e," at pages\\print\\print.vue:239");var i=e.data.data.list;t.getGoodsLists=[];var n=!0,o=!1,r=void 0;try{for(var s,c=i[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var u=s.value;t.getGoodsLists.push({traceCodeNumber:u.traceCodeNumber,traceToNumber:u.traceToNumber,traceFromNumber:u.traceFromNumber,outCodeRadio:"",traceGoodId:u.traceGoodId,traceStallId:-1,traceGoodsName:u.traceGoodsName})}}catch(d){o=!0,r=d}finally{try{n||null==c.return||c.return()}finally{if(o)throw r}}})},nextPrint:function(){var e=this;if(a("log",this.getGoodsLists," at pages\\print\\print.vue:258"),0!==this.getGoodsLists.length){var i=this.getGoodsLists,n=[],o=!0,r=!1,s=void 0;try{for(var c,u=i[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var d=c.value;d.outCodeRadio&&n.push({traceCodeNumber:d.traceCodeNumber,traceToNumber:d.traceToNumber,traceFromNumber:d.traceFromNumber,outCodeRadio:Number(d.outCodeRadio),traceGoodId:d.traceGoodId,traceStallId:-1})}}catch(l){r=!0,s=l}finally{try{o||null==u.return||u.return()}finally{if(r)throw s}}t.showModal({title:"是否立即打印?",success:function(i){i.confirm&&(a("log","用户点击确定"," at pages\\print\\print.vue:281"),t.showToast({title:"先打一局吃鸡",icon:"loading"}),e.$common.post("/trace-api/trace/generateOutCode",n).then(function(i){t.hideToast(),e.activeIndex=2}))}})}else this.$common.showToast("此批次号暂无商品,无法进行打印","none")},radioChange:function(t){this.$store.commit("setZsCodeNumber",t.detail.value);var e=0;for(var i in this.zsCodeArr)this.zsCodeArr[i].traceCodeNumber===t.detail.value&&(e=i);a("log",e," at pages\\print\\print.vue:305"),this.$store.commit("setActiveZs",e)},getHistory:function(t){var e=this;this.$common.get("/trace-api/trace/getTraceRecordByPage?traceCodeNumber="+t+"&pageNum="+this.historypageNum).then(function(t){a("log",t," at pages\\print\\print.vue:313"),200===Number(t.data.code)?(e.traceCodeNumberInfo=t.data.data,e.traceCodeNumberArr=t.data.data.list||[]):e.$common.error(t.data.message)})},next:function(){this.activeIndex<3&&this.activeIndex++,3===this.activeIndex&&(this.activeIndex=2)},last:function(){this.activeIndex>=0&&this.activeIndex--,this.activeIndex<0&&(this.activeIndex=0)},tapNav:function(t){this.active=t,this.activeIndex=0,this.start="",this.end="",this.$store.commit("setActiveZs",0),this.$store.commit("setZsCodeNumber","")},onShowDatePicker:function(t,e){this.type=t,"start"===e?this.showPickerStart=!0:this.showPickerEnd=!0,this.value=this[t]},onSelected:function(t,e,i){if(a("log",e.value," at pages\\print\\print.vue:359"),"cancel"===i)"start"===t?(this.showPickerStart=!1,this.start="",this.zsCodeArr=[],this.getTraceCode()):(this.showPickerEnd=!1,this.end="",this.zsCodeArr=[],this.getTraceCode());else if(this.zsCodeArr=[],"start"===t)this.showPickerStart=!1,this.start=e.value,a("log",this.$common.replace(e.value)," at pages\\print\\print.vue:378"),this.end?this.getTraceCode(+new Date(this.$common.replace(e.value)),+new Date(this.$common.replace(this.end))):this.getTraceCode(+new Date(this.$common.replace(e.value)));else{this.showPickerEnd=!1,this.end=e.value;e.value;this.start?this.getTraceCode(+new Date(this.$common.replace(this.start)),+new Date(this.$common.replace(e.value))):this.getTraceCode("",+new Date(this.$common.replace(e.value)))}},getTraceCode:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";a("log","traceApplyStartDate",e," at pages\\print\\print.vue:400"),a("log","traceApplyEndDate",i," at pages\\print\\print.vue:401"),e&&i&&e>=i?this.$common.error("开始时间必须小于结束时间"):this.$common.get("/trace-api/trace/getByPage?traceApplyStartDate="+e+"&traceApplyEndDate="+i+"&pageNum="+this.pageNum).then(function(e){a("log",e," at pages\\print\\print.vue:408"),200===Number(e.data.code)?(t.zsCodeInfo=e.data.data,t.zsCodeArr=t.zsCodeArr.concat(e.data.data.list)||[],a("log",t.zsCodeArr," at pages\\print\\print.vue:412")):t.$common.error(e.data.message)})},closeDrawer:function(){this.visible=!1},detailCode:function(t){this.visible=!0,this.getHistory(t),this.traceCodeNumberFlag=t}}};e.default=u}).call(this,i("6e42")["default"],i("0de9")["default"])},8109:function(t,e,i){"use strict";var a=i("a8ff"),n=i.n(a);n.a},a8ff:function(t,e,i){},c630:function(t,e,i){"use strict";(function(t){i("7b83"),i("921b");a(i("66fd"));var e=a(i("e9bb"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("6e42")["createPage"])},e9bb:function(t,e,i){"use strict";i.r(e);var a=i("55c3"),n=i("0ba8");for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);i("8109");var r,s=i("f0c5"),c=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],r);e["default"]=c.exports}},[["c630","common/runtime","common/vendor"]]]);