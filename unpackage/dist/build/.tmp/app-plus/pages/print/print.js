(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/print/print"],{"0ba8":function(t,e,o){"use strict";o.r(e);var a=o("e589"),i=o.n(a);for(var n in a)"default"!==n&&function(t){o.d(e,t,function(){return a[t]})}(n);e["default"]=i.a},"55c3":function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement,o=(t._self._c,Number(t.activeIndex)),a=Number(t.activeIndex),i=Number(t.activeIndex);t._isMounted||(t.e0=function(e){t.showPickerStart=!0},t.e1=function(e){t.showPickerEnd=!0},t.e2=function(e){t.count=""}),t.$mp.data=Object.assign({},{$root:{m0:o,m1:a,m2:i}})},i=[];o.d(e,"a",function(){return a}),o.d(e,"b",function(){return i})},8109:function(t,e,o){"use strict";var a=o("fe67"),i=o.n(a);i.a},c630:function(t,e,o){"use strict";(function(t){o("7b83"),o("921b");a(o("66fd"));var e=a(o("e9bb"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("6e42")["createPage"])},e589:function(t,e,o){"use strict";(function(t,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(){return o.e("components/qingqing-steps/uni-steps").then(o.bind(null,"aa0e"))},n=function(){return o.e("components/mx-datepicker/mx-datepicker").then(o.bind(null,"30a9"))},r=function(){return o.e("components/uni-list/uni-list").then(o.bind(null,"3561"))},s=function(){return o.e("components/uni-list-item/uni-list-item").then(o.bind(null,"8144"))},c=function(){return o.e("components/pengkai-draw").then(o.bind(null,"b76f"))},u={components:{uniSteps:i,MxDatePicker:n,uniList:r,uniListItem:s,pengkaiDraw:c},data:function(){return{start:"",end:"",zsCodeArr:[],zsCodeInfo:{},traceCodeNumberArr:[],traceCodeNumberInfo:{},current:"",activeIndex:0,scrollY:!0,visible:!1,showPickerEnd:!1,showPickerStart:!1,date:"2019/01/01",time:"15:00:12",datetime:"2019/01/01 15:00:12",range:["2019/01/01","2019/01/06"],rangetime:["2019/01/08 14:00","2019/01/16 13:59"],type:"datetime",value:"",active:0,pageNum:1,historypageNum:1,traceCodeNumberFlag:"",getGoodsLists:[],count:"",NavList:[{name:"设置外码比例"},{name:"设置外码数量"}],data:[{title:"选择批次码",desc:"关联商品"},{title:"设置规则",desc:"外码数量或比例"},{title:"打印",desc:"打印机出码"}]}},created:function(){this.getTraceCode()},watch:{activeIndex:function(t){0===Number(t)&&this.$store.state&&this.$store.state.activeZs&&(this.current=Number(this.$store.state.activeZs)),1===Number(t)&&this.getGoodsList()}},onReachBottom:function(){this.zsCodeInfo.total>this.zsCodeInfo.pageSize&&(this.pageNum++,this.getTraceCode())},methods:{outZsCode:function(){this.count?this.$common.get("/trace-api/trace/generateOutCodeByCount?count="+this.count).then(function(t){}):t.showToast({title:"请输入数量",duration:2e3,icon:"none"})},scroll:function(){this.traceCodeNumberInfo.total>this.traceCodeNumberInfo.pageSize&&(this.historypageNum++,this.getHistory(this.traceCodeNumberFlag))},getGoodsList:function(){var t=this;console.log(a(this.$store.state.zsCodeNumber," at pages\\print\\print.vue:235")),this.$common.get("/trace-api/trace/getTraceRecordByPage?traceCodeNumber="+this.$store.state.zsCodeNumber+"&pageNum=100000").then(function(e){console.log(a(e," at pages\\print\\print.vue:239"));var o=e.data.data.list;t.getGoodsLists=[];var i=!0,n=!1,r=void 0;try{for(var s,c=o[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=s.value;t.getGoodsLists.push({traceCodeNumber:u.traceCodeNumber,traceToNumber:u.traceToNumber,traceFromNumber:u.traceFromNumber,outCodeRadio:"",traceGoodId:u.traceGoodId,traceStallId:-1,traceGoodsName:u.traceGoodsName})}}catch(d){n=!0,r=d}finally{try{i||null==c.return||c.return()}finally{if(n)throw r}}})},nextPrint:function(){var e=this;if(console.log(a(this.getGoodsLists," at pages\\print\\print.vue:258")),0!==this.getGoodsLists.length){var o=this.getGoodsLists,i=[],n=!0,r=!1,s=void 0;try{for(var c,u=o[Symbol.iterator]();!(n=(c=u.next()).done);n=!0){var d=c.value;d.outCodeRadio&&i.push({traceCodeNumber:d.traceCodeNumber,traceToNumber:d.traceToNumber,traceFromNumber:d.traceFromNumber,outCodeRadio:Number(d.outCodeRadio),traceGoodId:d.traceGoodId,traceStallId:-1})}}catch(l){r=!0,s=l}finally{try{n||null==u.return||u.return()}finally{if(r)throw s}}t.showModal({title:"是否立即打印?",success:function(o){o.confirm&&(console.log(a("用户点击确定"," at pages\\print\\print.vue:281")),t.showToast({title:"先打一局吃鸡",icon:"loading"}),e.$common.post("/trace-api/trace/generateOutCode",i).then(function(o){t.hideToast(),e.activeIndex=2}))}})}else this.$common.showToast("此批次号暂无商品,无法进行打印","none")},radioChange:function(t){this.$store.commit("setZsCodeNumber",t.detail.value);var e=0;for(var o in this.zsCodeArr)this.zsCodeArr[o].traceCodeNumber===t.detail.value&&(e=o);console.log(a(e," at pages\\print\\print.vue:305")),this.$store.commit("setActiveZs",e)},getHistory:function(t){var e=this;this.$common.get("/trace-api/trace/getTraceRecordByPage?traceCodeNumber="+t+"&pageNum="+this.historypageNum).then(function(t){console.log(a(t," at pages\\print\\print.vue:313")),200===Number(t.data.code)?(e.traceCodeNumberInfo=t.data.data,e.traceCodeNumberArr=t.data.data.list||[]):e.$common.error(t.data.message)})},next:function(){this.activeIndex<3&&this.activeIndex++,3===this.activeIndex&&(this.activeIndex=2)},last:function(){this.activeIndex>=0&&this.activeIndex--,this.activeIndex<0&&(this.activeIndex=0)},tapNav:function(t){this.active=t,this.activeIndex=0,this.start="",this.end="",this.$store.commit("setActiveZs",0),this.$store.commit("setZsCodeNumber","")},onShowDatePicker:function(t,e){this.type=t,"start"===e?this.showPickerStart=!0:this.showPickerEnd=!0,this.value=this[t]},onSelected:function(t,e,o){if(console.log(a(e.value," at pages\\print\\print.vue:359")),"cancel"===o)"start"===t?(this.showPickerStart=!1,this.start="",this.zsCodeArr=[],this.getTraceCode()):(this.showPickerEnd=!1,this.end="",this.zsCodeArr=[],this.getTraceCode());else if(this.zsCodeArr=[],"start"===t)this.showPickerStart=!1,this.start=e.value,console.log(a(this.$common.replace(e.value)," at pages\\print\\print.vue:378")),this.end?this.getTraceCode(+new Date(this.$common.replace(e.value)),+new Date(this.$common.replace(this.end))):this.getTraceCode(+new Date(this.$common.replace(e.value)));else{this.showPickerEnd=!1,this.end=e.value;e.value;this.start?this.getTraceCode(+new Date(this.$common.replace(this.start)),+new Date(this.$common.replace(e.value))):this.getTraceCode("",+new Date(this.$common.replace(e.value)))}},getTraceCode:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(a("traceApplyStartDate",e," at pages\\print\\print.vue:400")),console.log(a("traceApplyEndDate",o," at pages\\print\\print.vue:401")),e&&o&&e>=o?this.$common.error("开始时间必须小于结束时间"):this.$common.get("/trace-api/trace/getByPage?traceApplyStartDate="+e+"&traceApplyEndDate="+o+"&pageNum="+this.pageNum).then(function(e){console.log(a(e," at pages\\print\\print.vue:408")),200===Number(e.data.code)?(t.zsCodeInfo=e.data.data,t.zsCodeArr=t.zsCodeArr.concat(e.data.data.list)||[],console.log(a(t.zsCodeArr," at pages\\print\\print.vue:412"))):t.$common.error(e.data.message)})},closeDrawer:function(){this.visible=!1},detailCode:function(t){this.visible=!0,this.getHistory(t),this.traceCodeNumberFlag=t}}};e.default=u}).call(this,o("6e42")["default"],o("0de9")["default"])},e9bb:function(t,e,o){"use strict";o.r(e);var a=o("55c3"),i=o("0ba8");for(var n in i)"default"!==n&&function(t){o.d(e,t,function(){return i[t]})}(n);o("8109");var r=o("2877"),s=Object(r["a"])(i["default"],a["a"],a["b"],!1,null,null,null);e["default"]=s.exports},fe67:function(t,e,o){}},[["c630","common/runtime","common/vendor"]]]);